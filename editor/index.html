<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="description"
    content="Bark Blockly Editor is a mod of Blockly. Many things are still in devolopment such as project saving, file readers, and costume and sound libraries." />
  <title>Bark Blockly Editor</title>
  <meta name="title" content="Bark coding - Editor">
  <meta name="description" content="Bark is a programming language building off of Google's Blockly.">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://bark.dumorando.com/">
  <meta property="og:title" content="Bark coding - Editor">
  <meta property="og:description" content="Bark is a programming language building off of Google's Blockly.">
  <meta property="og:image" content="/src/images/Logo.svg">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://bark.dumorando.com/">
  <meta property="twitter:title" content="Bark coding - Editor">
  <meta property="twitter:description" content="Bark is a programming language building off of Google's Blockly.">
  <meta property="twitter:image" content="/src/images/Logo.svg">
  
  <!-- Optional Meta Tags -->
  <meta name="keywords" content="coding, blockly, block coding, bark coding">
  <meta name="robots" content="index, follow">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="language" content="English">
  <meta name="revisit-after" content=" days">
  <meta name="author" content="mariocraft">
  <link rel="shortcut icon" href="/favicon.ico">
  <script src="https://cdn.jsdelivr.net/npm/blockly@11.1.1/blockly.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@blockly/theme-dark"></script>

  <script src="/editor/custom_category_es6.js"></script>
  <script src="/editor/toolbox_label_e26.js"></script>
  <link rel="stylesheet" lang="css" href="/editor/css/uploader.css">
  <link rel="stylesheet" href="/editor/css/editor.css">
</head>

<body class="code">
  <div class="compiling" id="compiling">
    <h1>downloading engine..</h1>
  </div>
  <div class="navbar">
    <a href="/"><img src="/src/images/Logo.svg" alt="Bark"
        width="25" height="25"></a>
    
    <a href="#" id="downloadbutton" onclick="downloadproject();" title="download project to your computer.">Download</a>
    
    <input type="file" id="fileInput" accept=".barkf" style="display: none;" onchange="loadWorkspaceFromFile(this.files[0])" />
    <a href="#" id="openproject" title="open a saved project">Open</a>
    
    <a href="/editor/tutorials" target="_BLANK" title="watch helpful tutorials to expand your knowledge!">Tutorials</a>
    
    <a href="/editor/cool/">Advanced</a>
    
    <a class="dark-mode-button" id="darkModeToggle">
      
      <dmbico alt="Dark Mode"></dmbico>
    </a>

    <input class="searchBar" id="projectname" placeholder="Project name..." value="project">

  </div>
  
  <!-- Code Tab -->
  <div id="blocklyDiv" class="tabpage"></div>
  
  <!-- Costumes Tab -->
  <div id="costumeseditordiv" class="tabpage">
    <h1>Upload costume</h1>
    <input type='file' accept='image/*' id="fileupload" onchange='openFile(event)'><br>
    <img id='costume' style="width:70px;" src="/src/images/dog/idle.svg">
    
    <!--
    image library
    
    <div class="gallery">
    <img src="/src/images/dog/scratch_dog.png" alt="scratch dog" width="100" onclick="loadImage('/src/images/dog/scratch_dog.png')">
    <div class="desc">Bark Dog</div></div>

    <div class="gallery">
    <img src="/src/images/sprites/Jerri.png" alt="Jerri" width="78" onclick="loadImage('/src/images/sprites/Jerri.png')">
    <div class="desc">Jerri</div></div>
    -->
    
  </div>
  
  <!-- Sounds Tab -->
  <div id="soundseditordiv" class="tabpage">
    <h1>Upload sound</h1>
    <input type="file" id="upload" accept="audio/*" onchange="openAudioFile(event);">
    <br />
    <div id="audiofilelist"></div>
  </div>

  <div class="popupholder">
    <div id="extensionseditordiv" class="popup">
      <h1>Choose An Extension</h1>
      <img src="/src/images/assets/extension_sine.png" alt="Sine Extension"
        title="Sine (created by nmsderp)" class="extension" width="160" id="hardcodedSineExtension" data-extensionpath="/editor/builtinextensions/sine.js">
      <img src="/src/images/assets/extension_ai.png" alt="Artificial Intelligence Extension"
        title="AI (created by funtasmo)" class="extension" width="160" id="hardcodedAIExtension" data-extensionpath="/editor/builtinextensions/ai.js">
      <h3>Or Upload a Extension to use.</h3>
      <input type="file" accept='.js' id="upload">
      <button class="buttonFrBx" onclick="document.querySelector('.popupholder').classList.remove('active')">Close menu..</button>
  
    </div>
  </div>
  <div id="editortabs">
    <button
      onclick="document.body.classList.add('code'); document.body.classList.remove('costumes'); document.body.classList.remove('sounds'); ">Code</button>
    <button
      onclick="document.body.classList.remove('code'); document.body.classList.add('costumes'); document.body.classList.remove('sounds');">Costumes</button>
    <button
      onclick="document.body.classList.remove('code'); document.body.classList.remove('costumes'); document.body.classList.add('sounds');">Sounds</button>
  </div>
  <div id="projectPlayer">
    <div id="projectToolbar">
      <img class="projectToolbarButton" style="cursor:pointer;" title="Run"
        src="/src/projecttoolbar/run.svg" width="10" id="runcode" onclick="window.Bark.gui.run()">
      <img class="projectToolbarButton" style="cursor:pointer;" title="Pause"
        src="/src/projecttoolbar/pause.svg">
      <img class="projectToolbarButton" style="cursor:pointer;" title="Stop"
        src="/src/projecttoolbar/stopped.svg" onclick="kill();">
      <img class="projectToolbarButton" src="/src/projecttoolbar/maximize.svg" title="Full screen"
        onclick="toggleFullscreen();" style="position: absolute; right: 0; cursor: pointer;">
    </div>
    <div id="stage-container"><div id="stage"></div></div>
  </div>
  <div id="sprites" style="position: absolute; right: 0%; bottom: 0%; width: 640px; height: calc(100% - 440px);">

  <label for="xpos">X pos:</label>
  <input value="0" type="number" id="xpos" name="xpos" min="-250" max="250" onchange="x = Number(document.getElementById('xpos').value) + 270;">
  <br />
  <br />
  <label for="ypos">Y pos:</label>
  <input value="0" type="number" id="ypos" name="ypos" min="-140" max="190" onchange="y = Number(document.getElementById('ypos').value) + 130;">
  <br />
  <br />
  <label for="spritesize">Size:</label>
  <input value="100" type="number" id="spritesize" name="spritesize" min="0" max="300" onchange="setsize(Number(document.getElementById('spritesize').value))">


    <script type="module" src="/editor/js/index.js"></script>
    <script>
      

      

      


      function run_code() {
        eval();
      }

      // Script from Stack Overflow
      let openFile = function (file) {
        let input = file.target;
        let reader = new FileReader();
        reader.onload = function () {
          let dataURL = reader.result;
          let output = document.getElementById('costume');
          loadImg(dataURL);
          costume = dataURL;
          output.src = dataURL;
        };
        reader.readAsDataURL(input.files[0]);
      };

      let openAudioFile = function (file) {
        let input = file.target.files[0];
        let reader = new FileReader();
        reader.onload = function () {
          let audio = new Audio();
          audio.src = URL.createObjectURL(input);
          audio.controls = true;
          document.getElementById("audiofilelist").append(audio);
        };
        reader.readAsDataURL(input);
      };

      const theme = localStorage.getItem('theme');
if (theme) {
    if (theme.startsWith('#')) {
        const style = document.createElement('style');
        document.head.append(style);
        const link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = `/src/themes/bluedodger.css`;
        document.head.append(link);
    } else if (theme != "bluedodger") {
        const link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = `/src/themes/${theme}.css`;
        document.head.append(link);
    } else {
        const link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = `/src/themes/bluedodger.css`;
        document.head.append(link);
    }
} else {
        const link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = `/src/themes/bluedodger.css`;
        document.head.append(link);
    }
    </script>
</body>
<script src="/editor/custom.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/index.js"></script>
<script src="/editor/uploader.js"></script>
<script src="/editor/extensions.js"></script>
<!--
  <script src="/editor/extensions.js"></script>
  to be reimplemented later, for some reason updatetoolbox breaks category switching :(
-->
</html>
